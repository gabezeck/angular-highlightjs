/*! angular-highlightjs
version: 0.4.1
build date: 2015-04-07
author: Chih-Hsuan Fan
https://github.com/pc035860/angular-highlightjs.git */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="hljs"),function(a,b,c){function d(a){var c=!0;return b.forEach(["source","include"],function(b){a[b]&&(c=!1)}),c}var e=b.module("hljs",[]);e.provider("hljsService",function(){var a={};return{setOptions:function(c){b.extend(a,c)},getOptions:function(){return b.copy(a)},$get:["$window",function(c){return(c.hljs.configure||b.noop)(a),c.hljs}]}}),e.factory("hljsCache",["$cacheFactory",function(a){return a("hljsCache")}]),e.controller("HljsCtrl",["hljsCache","hljsService",function(a,c){var d=this,e=null,f=null,g=null,h=null;d.init=function(a){e=a},d.setLanguage=function(a){f=a,g&&d.highlight(g)},d.highlightCallback=function(a){h=a},d.highlight=function(i){if(e){var j,k;g=i,f?(k=d._cacheKey(f,g),j=a.get(k),j||(j=c.highlight(f,c.fixMarkup(g),!0),a.put(k,j))):(k=d._cacheKey(g),j=a.get(k),j||(j=c.highlightAuto(c.fixMarkup(g)),a.put(k,j))),e.html(j.value),e.addClass(j.language),null!==h&&b.isFunction(h)&&h()}},d.clear=function(){e&&(g=null,e.text(""))},d.release=function(){e=null},d._cacheKey=function(){var a=Array.prototype.slice.call(arguments),b="!angular-highlightjs!";return a.join(b)}}]);var f,g,h,i;f=["$compile","$parse",function(a,c){return{restrict:"EA",controller:"HljsCtrl",compile:function(e,f,g){var h=e[0].innerHTML.replace(/^(\r\n|\r|\n)/m,""),i=e[0].textContent.replace(/^(\r\n|\r|\n)/m,"");return e.html('<pre><code class="hljs"></code></pre>'),function(e,f,g,j){var k,l;if(b.isDefined(g.compile)&&(k=c(g.compile)),b.isDefined(g.escape)?l=c(g.escape):b.isDefined(g.noEscape)&&(l=c("false")),j.init(f.find("code")),g.onhighlight&&j.highlightCallback(function(){e.$eval(g.onhighlight)}),(h||i)&&d(g)){var m;m=l&&!l(e)?i:h,j.highlight(m),k&&k(e)&&a(f.find("code").contents())(e)}e.$on("$destroy",function(){j.release()})}}}}],g=function(a){return[function(){return{require:"?hljs",restrict:"A",link:function(c,d,e,f){f&&e.$observe(a,function(a){b.isDefined(a)&&f.setLanguage(a)})}}}]},h=function(a){return["$compile","$parse",function(c,d){return{require:"?hljs",restrict:"A",link:function(e,f,g,h){var i;h&&(b.isDefined(g.compile)&&(i=d(g.compile)),e.$watch(g[a],function(a,b){a?(h.highlight(a),i&&i(e)&&c(f.find("code").contents())(e)):h.clear()}))}}}]},i=function(a){return["$http","$templateCache","$q","$compile","$parse",function(c,d,e,f,g){return{require:"?hljs",restrict:"A",compile:function(h,i,j){var k=i[a];return function(a,h,i,j){var l,m=0;j&&(b.isDefined(i.compile)&&(l=g(i.compile)),a.$watch(k,function(g){var i=++m;if(g&&b.isString(g)){var k,n;k=d.get(g),k||(n=e.defer(),c.get(g,{cache:d,transformResponse:function(a,b){return a}}).success(function(a){i===m&&n.resolve(a)}).error(function(){i===m&&j.clear(),n.resolve()}),k=n.promise),e.when(k).then(function(c){c&&(b.isArray(c)?c=c[1]:b.isObject(c)&&(c=c.data),c=c.replace(/^(\r\n|\r|\n)/m,""),j.highlight(c),l&&l(a)&&f(h.find("code").contents())(a))})}else j.clear()}))}}}}]},e.directive("hljs",f).directive("language",g("language")).directive("source",h("source")).directive("include",i("include"))}(window,window.angular);